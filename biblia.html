<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>B√≠blia da Vov√≥</title>
    
    <link rel="manifest" href="./manifest.json">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="B√≠blia">
    <meta name="theme-color" content="#2c3e50">

    <link rel="apple-touch-icon" href="./icon-192.png">
    <link rel="icon" type="image/png" href="./icon-192.png">

    <style>
        /* --- ESTILO (CSS) --- */
        * { box-sizing: border-box; }

        body {
            font-family: 'Verdana', sans-serif;
            background-color: #fdfbf7;
            color: #111;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            height: 100vh; 
            overflow: hidden; 
        }

        /* CABE√áALHO */
        header {
            background-color: #2c3e50;
            color: white;
            padding-top: max(20px, env(safe-area-inset-top)); 
            padding-bottom: 15px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 20;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        h1 { margin: 0; font-size: 22px; }

        /* SELETOR DE VERS√ÉO */
        .seletor-versao-container {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255,255,255,0.1);
            padding: 5px 10px;
            border-radius: 8px;
        }
        .label-versao { font-size: 14px; font-weight: normal; color: #ecf0f1; }
        #select-versao {
            padding: 8px; border-radius: 5px; border: none;
            font-size: 16px; font-weight: bold; color: #2c3e50; background-color: #fff;
        }

        /* CORPO PRINCIPAL */
        main {
            flex: 1; 
            overflow-y: auto; 
            padding: 15px;
            padding-bottom: 100px; 
            -webkit-overflow-scrolling: touch;
            position: relative;
        }

        /* GERAL - ELEMENTOS VISUAIS */
        .separador-testamento {
            background-color: #d35400; color: white; padding: 12px;
            font-size: 20px; font-weight: bold; text-align: center;
            border-radius: 8px; margin-top: 25px; margin-bottom: 15px;
            text-transform: uppercase; box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .separador-testamento:first-child { margin-top: 0; }

        .grade-livros { 
            display: grid; gap: 12px; 
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            padding-bottom: 10px; 
        }

        .grade-capitulos { 
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; padding-bottom: 20px; 
        }

        /* BOT√ïES */
        button { touch-action: manipulation; }
        button:active { transform: scale(0.96); opacity: 0.8; }

        .btn-livro, .btn-hinario {
            background-color: #ecf0f1; border: 2px solid #bdc3c7;
            padding: 18px; font-size: 18px; text-align: center;
            border-radius: 10px; cursor: pointer; font-weight: bold; color: #2c3e50;
        }

        .btn-capitulo {
            padding: 20px; font-size: 24px; background-color: #fff;
            border: 2px solid #2c3e50; border-radius: 12px; cursor: pointer;
            color: #2c3e50; font-weight: bold;
        }

        .btn-voltar-topo {
            grid-column: 1 / -1; background-color: #e74c3c; color: white; border: none;
            padding: 15px; font-size: 20px; border-radius: 12px;
            cursor: pointer; margin-bottom: 10px;
            display: flex; align-items: center; justify-content: center; gap: 10px;
        }

        /* LEITURA */
        #texto-biblico, #texto-hino {
            font-size: 26px; line-height: 1.8; padding: 5px;
            text-align: left; margin-bottom: 30px;
        }
        .versiculo-num {
            font-size: 18px; color: #e67e22; font-weight: bold;
            vertical-align: super; margin-right: 5px;
        }

        /* HIN√ÅRIOS LISTA */
        .lista-hinos { display: flex; flex-direction: column; gap: 10px; }
        .item-hino {
            background: white; border: 1px solid #bdc3c7; padding: 15px;
            border-radius: 8px; font-size: 18px; color: #2c3e50; text-align: left; cursor: pointer;
        }
        .estrofe-hino { margin-bottom: 25px; } /* Espa√ßo maior entre estrofes */

        /* --- BARRA DE NAVEGA√á√ÉO (Leitura) --- */
        #rodape-nav {
            background-color: #ecf0f1; 
            padding: 10px;
            display: flex; gap: 15px;
            border-top: 3px solid #bdc3c7;
            position: fixed; 
            bottom: 0; left: 0; right: 0;
            z-index: 50; 
            padding-bottom: max(10px, env(safe-area-inset-bottom));
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        }

        .btn-nav {
            flex: 1; padding: 15px 0; font-size: 24px;
            background-color: #2c3e50; color: white;
            border: none; border-radius: 12px; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
        }
        .btn-voltar-menu { background-color: #d35400; font-size: 16px; flex: 1; }

        /* --- BARRA DE ABAS (Menu Principal) --- */
        #abas-principais {
            position: fixed; bottom: 0; left: 0; right: 0;
            height: 70px; background-color: #fff;
            display: flex; box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            z-index: 40;
            padding-bottom: env(safe-area-inset-bottom);
        }
        .aba {
            flex: 1; border: none; background: transparent;
            font-size: 14px; font-weight: bold; color: #95a5a6;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .aba.ativa { color: #2c3e50; background-color: #ecf0f1; border-top: 3px solid #e67e22; }
        .icone-aba { font-size: 24px; margin-bottom: 2px; }

        /* UTILIT√ÅRIOS */
        .escondido { display: none !important; }
        #loading {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            font-size: 24px; color: #e67e22; background: rgba(255,255,255,0.95);
            padding: 20px; border-radius: 10px; z-index: 60;
            display: none; width: 80%; text-align: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

    </style>
</head>
<body>

    <header>
        <h1 id="titulo-app">B√≠blia da Vov√≥</h1>
        <div id="area-versao" class="seletor-versao-container">
            <span class="label-versao">Vers√£o:</span>
            <select id="select-versao" onchange="mudarVersao()">
                <option value="nvi">NVI (Atual)</option>
                <option value="acf">Corrigida (Fiel)</option>
                <option value="aa">Revista (AA)</option>
            </select>
        </div>
    </header>

    <div id="loading">‚è≥ Carregando...</div>

    <main id="area-principal">
        
        <div id="tab-biblia">
            <div id="tela-livros"></div>
            <div id="tela-capitulos" class="grade-capitulos escondido"></div>
            
            <div id="tela-leitura" class="escondido">
                <h2 id="titulo-capitulo-leitura" style="text-align:center; color:#2c3e50; margin-top:0;"></h2>
                <div id="texto-biblico"></div>
            </div>
        </div>

        <div id="tab-hinarios" class="escondido">
            <div id="tela-escolha-hinario" class="grade-livros" style="margin-top:20px;">
                <button class="btn-livro" onclick="abrirHinario('harpa')">üéµ Harpa Crist√£</button>
                <button class="btn-livro" onclick="abrirHinario('cantor')">üéº Cantor Crist√£o</button>
            </div>

            <div id="tela-lista-hinos" class="escondido">
                <button class="btn-voltar-topo" onclick="voltarParaEscolhaHinario()">&#11013; Voltar aos Hin√°rios</button>
                <input type="text" id="busca-hino" placeholder="N√∫mero ou nome..." 
                       style="width:100%; padding:15px; margin-bottom:15px; font-size:18px; border-radius:8px; border:1px solid #ccc;"
                       onkeyup="filtrarHinos()">
                <div id="lista-hinos-container" class="lista-hinos"></div>
            </div>

            <div id="tela-leitura-hino" class="escondido">
                <h2 id="titulo-hino-leitura" style="text-align:center; color:#2c3e50; margin-top:0;"></h2>
                <div id="texto-hino"></div>
            </div>
        </div>

    </main>

    <footer id="rodape-nav" class="escondido">
        <button type="button" class="btn-nav btn-voltar-menu" onclick="voltarInicioLeitura()">In√≠cio</button>
        <button type="button" class="btn-nav" onclick="navegarConteudo(-1)">&#9664;</button>
        <button type="button" class="btn-nav" onclick="navegarConteudo(1)">&#9654;</button>
    </footer>

    <nav id="abas-principais">
        <button class="aba ativa" onclick="mudarAba('biblia')" id="btn-aba-biblia">
            <span class="icone-aba">üìñ</span> B√≠blia
        </button>
        <button class="aba" onclick="mudarAba('hinarios')" id="btn-aba-hinarios">
            <span class="icone-aba">üéµ</span> Hin√°rios
        </button>
    </nav>

    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => { navigator.serviceWorker.register('./sw.js'); });
        }

        // --- DADOS B√çBLIA ---
        const livroSiglas = { "G√™nesis": "gn", "√äxodo": "ex", "Lev√≠tico": "lv", "N√∫meros": "nm", "Deuteron√¥mio": "dt", "Josu√©": "js", "Ju√≠zes": "jz", "Rute": "rt", "1 Samuel": "1sm", "2 Samuel": "2sm", "1 Reis": "1rs", "2 Reis": "2rs", "1 Cr√¥nicas": "1cr", "2 Cr√¥nicas": "2cr", "Esdras": "ed", "Neemias": "ne", "Ester": "et", "J√≥": "job", "Salmos": "sl", "Prov√©rbios": "pv", "Eclesiastes": "ec", "C√¢nticos": "ct", "Isa√≠as": "is", "Jeremias": "jr", "Lamenta√ß√µes": "lm", "Ezequiel": "ez", "Daniel": "dn", "Oseias": "os", "Joel": "jl", "Am√≥s": "am", "Obadias": "ob", "Jonas": "jn", "Miqueias": "mq", "Naum": "na", "Habacuque": "hc", "Sofonias": "sf", "Ageu": "ag", "Zacarias": "zc", "Malaquias": "ml", "Mateus": "mt", "Marcos": "mc", "Lucas": "lc", "Jo√£o": "jo", "Atos": "at", "Romanos": "rm", "1 Cor√≠ntios": "1co", "2 Cor√≠ntios": "2co", "G√°latas": "gl", "Ef√©sios": "ef", "Filipenses": "fp", "Colossenses": "cl", "1 Tessalonicenses": "1ts", "2 Tessalonicenses": "2ts", "1 Tim√≥teo": "1tm", "2 Tim√≥teo": "2tm", "Tito": "tt", "Filemom": "fm", "Hebreus": "hb", "Tiago": "tg", "1 Pedro": "1pe", "2 Pedro": "2pe", "1 Jo√£o": "1jo", "2 Jo√£o": "2jo", "3 Jo√£o": "3jo", "Judas": "jd", "Apocalipse": "ap" };
        const antigoTestamento = [{ nome: "G√™nesis", caps: 50 }, { nome: "√äxodo", caps: 40 }, { nome: "Lev√≠tico", caps: 27 }, { nome: "N√∫meros", caps: 36 }, { nome: "Deuteron√¥mio", caps: 34 }, { nome: "Josu√©", caps: 24 }, { nome: "Ju√≠zes", caps: 21 }, { nome: "Rute", caps: 4 }, { nome: "1 Samuel", caps: 31 }, { nome: "2 Samuel", caps: 24 }, { nome: "1 Reis", caps: 22 }, { nome: "2 Reis", caps: 25 }, { nome: "1 Cr√¥nicas", caps: 29 }, { nome: "2 Cr√¥nicas", caps: 36 }, { nome: "Esdras", caps: 10 }, { nome: "Neemias", caps: 13 }, { nome: "Ester", caps: 10 }, { nome: "J√≥", caps: 42 }, { nome: "Salmos", caps: 150 }, { nome: "Prov√©rbios", caps: 31 }, { nome: "Eclesiastes", caps: 12 }, { nome: "C√¢nticos", caps: 8 }, { nome: "Isa√≠as", caps: 66 }, { nome: "Jeremias", caps: 52 }, { nome: "Lamenta√ß√µes", caps: 5 }, { nome: "Ezequiel", caps: 48 }, { nome: "Daniel", caps: 12 }, { nome: "Oseias", caps: 14 }, { nome: "Joel", caps: 3 }, { nome: "Am√≥s", caps: 9 }, { nome: "Obadias", caps: 1 }, { nome: "Jonas", caps: 4 }, { nome: "Miqueias", caps: 7 }, { nome: "Naum", caps: 3 }, { nome: "Habacuque", caps: 3 }, { nome: "Sofonias", caps: 3 }, { nome: "Ageu", caps: 2 }, { nome: "Zacarias", caps: 14 }, { nome: "Malaquias", caps: 4 }];
        const novoTestamento = [{ nome: "Mateus", caps: 28 }, { nome: "Marcos", caps: 16 }, { nome: "Lucas", caps: 24 }, { nome: "Jo√£o", caps: 21 }, { nome: "Atos", caps: 28 }, { nome: "Romanos", caps: 16 }, { nome: "1 Cor√≠ntios", caps: 16 }, { nome: "2 Cor√≠ntios", caps: 13 }, { nome: "G√°latas", caps: 6 }, { nome: "Ef√©sios", caps: 6 }, { nome: "Filipenses", caps: 4 }, { nome: "Colossenses", caps: 4 }, { nome: "1 Tessalonicenses", caps: 5 }, { nome: "2 Tessalonicenses", caps: 3 }, { nome: "1 Tim√≥teo", caps: 6 }, { nome: "2 Tim√≥teo", caps: 4 }, { nome: "Tito", caps: 3 }, { nome: "Filemom", caps: 1 }, { nome: "Hebreus", caps: 13 }, { nome: "Tiago", caps: 5 }, { nome: "1 Pedro", caps: 5 }, { nome: "2 Pedro", caps: 3 }, { nome: "1 Jo√£o", caps: 5 }, { nome: "2 Jo√£o", caps: 1 }, { nome: "3 Jo√£o", caps: 1 }, { nome: "Judas", caps: 1 }, { nome: "Apocalipse", caps: 22 }];

        let modoAtual = 'biblia';
        let hinarioSelecionado = '';
        let dadosHinario = [];

        let livroAtualNome = "";
        let livroAtualMaxCaps = 0;
        let capituloAtual = 1;
        let cacheLivroAtual = null;
        let nomeLivroCache = "";
        let versaoCache = "";

        let hinoAtual = 1;

        const loading = document.getElementById('loading');
        const areaVersao = document.getElementById('area-versao');
        const rodape = document.getElementById('rodape-nav');
        const abasPrincipais = document.getElementById('abas-principais');
        const selectVersao = document.getElementById('select-versao');
        const tituloApp = document.getElementById('titulo-app');

        const tabBiblia = document.getElementById('tab-biblia');
        const tabHinarios = document.getElementById('tab-hinarios');
        const telaLivros = document.getElementById('tela-livros');
        const telaCapitulos = document.getElementById('tela-capitulos');
        const telaLeitura = document.getElementById('tela-leitura');
        
        const telaEscolhaHinario = document.getElementById('tela-escolha-hinario');
        const telaListaHinos = document.getElementById('tela-lista-hinos');
        const telaLeituraHino = document.getElementById('tela-leitura-hino');

        function iniciarApp() {
            renderizarLivros();
        }

        function alternarBarras(modo) {
            if (modo === 'leitura') {
                abasPrincipais.classList.add('escondido');
                rodape.classList.remove('escondido');
            } else {
                abasPrincipais.classList.remove('escondido');
                rodape.classList.add('escondido');
            }
        }

        function mudarAba(aba) {
            modoAtual = aba;
            document.querySelectorAll('.aba').forEach(btn => btn.classList.remove('ativa'));
            document.getElementById(`btn-aba-${aba}`).classList.add('ativa');
            tabBiblia.classList.add('escondido');
            tabHinarios.classList.add('escondido');
            alternarBarras('navegacao');

            if (aba === 'biblia') {
                tabBiblia.classList.remove('escondido');
                tituloApp.innerText = "B√≠blia da Vov√≥";
                areaVersao.classList.remove('escondido');
                if (!telaLeitura.classList.contains('escondido')) renderizarLivros();
            } else {
                tabHinarios.classList.remove('escondido');
                tituloApp.innerText = "Hin√°rios";
                areaVersao.classList.add('escondido');
                telaLeituraHino.classList.add('escondido');
                telaListaHinos.classList.add('escondido');
                telaEscolhaHinario.classList.remove('escondido');
            }
        }

        // --- B√çBLIA ---
        function renderizarLivros() {
            telaLivros.innerHTML = "";
            telaCapitulos.classList.add('escondido');
            telaLeitura.classList.add('escondido');
            telaLivros.classList.remove('escondido');
            alternarBarras('navegacao');
            
            function criarSecao(titulo, lista) {
                const divTitulo = document.createElement('div');
                divTitulo.className = 'separador-testamento';
                divTitulo.innerText = titulo;
                telaLivros.appendChild(divTitulo);
                const grid = document.createElement('div');
                grid.className = 'grade-livros';
                lista.forEach((livro) => {
                    const btn = document.createElement('button');
                    btn.className = 'btn-livro';
                    btn.innerText = livro.nome;
                    btn.onclick = () => abrirCapitulos(livro.nome, livro.caps);
                    grid.appendChild(btn);
                });
                telaLivros.appendChild(grid);
            }
            criarSecao("Antigo Testamento", antigoTestamento);
            criarSecao("Novo Testamento", novoTestamento);
        }

        function abrirCapitulos(nome, totalCaps) {
            livroAtualNome = nome;
            livroAtualMaxCaps = totalCaps;
            tituloApp.innerText = nome;
            telaLivros.classList.add('escondido');
            telaCapitulos.classList.remove('escondido');
            telaCapitulos.innerHTML = "";
            alternarBarras('navegacao');

            const btnVoltar = document.createElement('button');
            btnVoltar.className = 'btn-voltar-topo';
            btnVoltar.innerHTML = "&#11013; Escolher outro livro"; 
            btnVoltar.onclick = () => { renderizarLivros(); tituloApp.innerText = "B√≠blia da Vov√≥"; };
            telaCapitulos.appendChild(btnVoltar);

            for (let i = 1; i <= totalCaps; i++) {
                const btn = document.createElement('button');
                btn.className = 'btn-capitulo';
                btn.innerText = i;
                btn.onclick = () => lerCapitulo(i);
                telaCapitulos.appendChild(btn);
            }
        }

        async function lerCapitulo(numero) {
            capituloAtual = numero;
            mostrarLoading(true);
            const versao = selectVersao.value;
            const sigla = livroSiglas[livroAtualNome];
            const url = `https://raw.githubusercontent.com/thiagobodruk/biblia/master/xml/${versao}/${versao}-${sigla}.xml`;

            try {
                let xmlDoc;
                if (cacheLivroAtual && nomeLivroCache === livroAtualNome && versaoCache === versao) {
                    xmlDoc = cacheLivroAtual;
                } else {
                    const resposta = await fetch(url);
                    if (!resposta.ok) throw new Error("Livro n√£o encontrado.");
                    const textoXML = await resposta.text();
                    xmlDoc = new DOMParser().parseFromString(textoXML, "text/xml");
                    cacheLivroAtual = xmlDoc; nomeLivroCache = livroAtualNome; versaoCache = versao;
                }
                const capituloElemento = xmlDoc.querySelector(`chapter[number="${capituloAtual}"]`);
                let textoHTML = capituloElemento ? "" : "<p>Cap√≠tulo n√£o encontrado.</p>";
                if (capituloElemento) {
                    capituloElemento.querySelectorAll("verse").forEach(v => {
                        textoHTML += `<span class="versiculo-num">${v.getAttribute("number")}</span> ${v.textContent}<br><br>`;
                    });
                }
                document.getElementById('titulo-capitulo-leitura').innerText = `${livroAtualNome} ${capituloAtual}`;
                document.getElementById('texto-biblico').innerHTML = textoHTML;
                telaCapitulos.classList.add('escondido');
                telaLeitura.classList.remove('escondido');
                alternarBarras('leitura');
                window.scrollTo(0,0);
            } catch (erro) {
                alert("Erro ao carregar texto. Verifique a internet.");
            } finally {
                mostrarLoading(false);
            }
        }

        // --- HIN√ÅRIOS ---
        async function abrirHinario(tipo) {
            hinarioSelecionado = tipo;
            telaEscolhaHinario.classList.add('escondido');
            mostrarLoading(true);
            
            // LINKS CORRIGIDOS E CONFI√ÅVEIS
            let url = "";
            if(tipo === 'harpa') {
                // Link est√°vel para Harpa
                url = "https://raw.githubusercontent.com/hiagodotme/harpa-crista-json/master/harpa.json"; 
                tituloApp.innerText = "Harpa Crist√£";
            } else {
                // Link est√°vel para Cantor Crist√£o
                url = "https://raw.githubusercontent.com/rodrigorauber/cantor-cristao-json/master/cantor.json";
                tituloApp.innerText = "Cantor Crist√£o";
            }

            try {
                if(dadosHinario.length === 0 || dadosHinario.tipo !== tipo) {
                    const resp = await fetch(url);
                    if(!resp.ok) throw new Error("Erro ao baixar hin√°rio");
                    const json = await resp.json();
                    dadosHinario = json;
                    dadosHinario.tipo = tipo; 
                }
                renderizarListaHinos();
                telaListaHinos.classList.remove('escondido');
            } catch(e) {
                alert("Erro ao carregar hin√°rio. Verifique sua internet.");
                telaEscolhaHinario.classList.remove('escondido');
                console.error(e);
            } finally {
                mostrarLoading(false);
            }
        }

        function renderizarListaHinos(filtro = "") {
            const container = document.getElementById('lista-hinos-container');
            container.innerHTML = "";
            const termo = filtro.toLowerCase();
            dadosHinario.forEach((hino, index) => {
                let numero = hino.numero || hino.number || (index + 1);
                let titulo = hino.titulo || hino.title || "Sem t√≠tulo";
                
                if(String(titulo).toLowerCase().includes(termo) || String(numero).includes(termo)) {
                    const div = document.createElement('div');
                    div.className = 'item-hino';
                    div.innerHTML = `<strong>${numero}.</strong> ${titulo}`;
                    div.onclick = () => lerHino(index);
                    container.appendChild(div);
                }
            });
        }

        function filtrarHinos() {
            renderizarListaHinos(document.getElementById('busca-hino').value);
        }

        function lerHino(index) {
            hinoAtual = index;
            const hino = dadosHinario[index];
            let titulo = hino.titulo || hino.title;
            let numero = hino.numero || hino.number || (index + 1);
            let letraHTML = "";
            
            // --- DETETIVE DE LETRAS (Resolve a tela branca) ---
            // Procura a letra em v√°rias propriedades poss√≠veis
            let letraRaw = hino.letra || hino.text || hino.verses || hino.content || hino.lyrics;

            if (!letraRaw) {
                letraHTML = "<p style='text-align:center; color:red;'>Letra indispon√≠vel para este hino.</p>";
            } else if (Array.isArray(letraRaw)) {
                // Se for uma lista de estrofes
                letraRaw.forEach(estrofe => {
                     let texto = (typeof estrofe === 'string') ? estrofe : (estrofe.verse || estrofe.text || "");
                     letraHTML += `<div class="estrofe-hino">${texto.replace(/\n/g, '<br>')}</div>`;
                });
            } else {
                // Se for texto corrido
                letraHTML = `<div class="estrofe-hino">${String(letraRaw).replace(/\n/g, '<br>')}</div>`;
            }

            document.getElementById('titulo-hino-leitura').innerText = `${numero}. ${titulo}`;
            document.getElementById('texto-hino').innerHTML = letraHTML;

            telaListaHinos.classList.add('escondido');
            telaLeituraHino.classList.remove('escondido');
            alternarBarras('leitura');
            window.scrollTo(0,0);
        }

        function voltarParaEscolhaHinario() {
            telaListaHinos.classList.add('escondido');
            telaEscolhaHinario.classList.remove('escondido');
            tituloApp.innerText = "Hin√°rios";
        }

        function voltarInicioLeitura() {
            alternarBarras('navegacao');
            if (modoAtual === 'biblia') {
                telaLeitura.classList.add('escondido');
                telaCapitulos.classList.remove('escondido');
                tituloApp.innerText = livroAtualNome;
            } else {
                telaLeituraHino.classList.add('escondido');
                telaListaHinos.classList.remove('escondido');
            }
        }

        function navegarConteudo(direcao) {
            if (modoAtual === 'biblia') {
                const novoCap = capituloAtual + direcao;
                if (novoCap < 1 || novoCap > livroAtualMaxCaps) return alert("Fim do livro.");
                lerCapitulo(novoCap);
            } else {
                const novoIndex = hinoAtual + direcao;
                if (novoIndex < 0 || novoIndex >= dadosHinario.length) return alert("Fim do hin√°rio.");
                lerHino(novoIndex);
            }
        }

        function mudarVersao() {
            if (!telaLeitura.classList.contains('escondido')) lerCapitulo(capituloAtual);
        }
        function mostrarLoading(ativo) {
            loading.style.display = ativo ? 'block' : 'none';
        }

        iniciarApp();
    </script>
</body>
</html>
